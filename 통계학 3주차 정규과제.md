# 가설검정

가설검정:p값(p-value)이라는 수치를 계산하여 가설을 지지하는지 여부를 판단

---

### 확증적 자료분석과 탐색적 자료분석

확증적 자료분석: 미리 세운 가설을 검증하는 방법

    * 가설을 세움 -> 실험/관찰로 가설과 관련된 데이터 수집 -> 세운 가설을 검정
    
탐색적 자료분석: 전체 데이터를 탐색적으로 해석. 데이터의 특징이나 경향을 파악하고 가설 후보를 찾는 것이 목적

    * 가설이 없음 -> 데이터를 다양하게 탐색하여 해석 -> 데이터의 경향 파악, 가설 후보 물색

---

### 가설검정

귀무가설: 밝히고자 하는 가설의 부정 명제

   * 대립가설: 밝히고 싶은 가설 (예: 신약이 효과가 있다)
   * 가설검정은 귀무가설과 대립가설을 세운 다음, 데이터를 통해 귀무가설을 부정하여 대립가설           을 지지하는 흐름으로 진행됨.

**가설검정의 핵심은 관찰된 차이가 우연에 의한 것인지, 아니면 정말로 약의 효과 때문인지(즉, 표본평균의 차이가 우연한 데이터 퍼짐인지)를 구별하는 것**

---

### 귀무가설이 옳다는 가정

귀무가설이 옳다는 가상 세계에서, 표본을 여러 번 추출하여 표본 평균의 차이를 히스토그램을 이용해 귀무가설이 옳을 때 표본 평균의 차이가 우연히 얼마나 벌어질 수 있는지 시각적으로 나타낼 수 있음

---

### p-value (p값)

**p값**은 우리가 실제로 얻은 결과가 단순한 우연일 확률이 얼마나 될까를 나타내는 척도

   * p값이 작다 (≤ 0.05): 우리가 얻은 결과가 가상 세계(귀무가설이 옳은 세계)에서는 매우 드물게       나타나는 일. 따라서 귀무가설이 틀렸다고 판단하고 귀무가설을 기각하고 대립가설을 채택 

   * p값이 크다 (> 0.05): 우리가 얻은 결과는 가상 세계에서도 흔하게 나타나는 일. 우리의 결과가       우연 때문에 발생했을 가능성을 배제할 수 없으므로, 귀무가설을 기각할 수 없고 판단을 보류   

---

### 가설검정 흐름 정리

1.  귀무가설과 대립가설 설정
2.  실험 또는 관찰을 통해 표본 데이터 획득
3.  귀무가설이 옳은 세계를 상정
4.  현실 데이터가 귀무가설이 옳은 세계에서 어느 정도로 나타나는지를 나타내는 p값 계산
5.  p값이 **유의수준 0.05보다 작다면** 귀무가설을 기각하고 대립가설 채택, p값이 유의수준 0.05보다 크다면 귀무가설을 기각하지 않고 판단 보류

---

## 5.2 가설검정 시행

가설검정의 개념은 공통이지만, p값의 계산 방법은 검정 기법마다 다름. 

### 기각역과 p값

* 기각역: 분산 분포의 좌우 2.5%씩의 영역 (유의수준 5%)
* p값: 실제 값이 귀무가설이 옳을 때의 t분포 내 어디에 위치하는지 구한 뒤, 그 이상의 극단적인 값이 나올 확률.
* 양측검정: 양수와 음수 양쪽 모두를 고려합니다.
* 단측검정: 어느 한쪽만 고려해 넓이를 계산합니다.

※ "통계적으로 유의미한 차이를 발견할 수 없었다"는 말은 귀무가설을 지지한다는 것이 아니라, 귀무가설과 대립가설 중 어느 쪽도 지지할 수 없어 결론을 보류한다는 판단.

---

## 5.3 가설검정 관련 그래프

### 오차 막대

   * 평균값의 확률: 평균값 ± 표준오차
   * 신뢰구간: 평균값을 중심으로 95% 신뢰구간
   * 데이터 퍼짐: 평균값 ± 표준편차

※ 오차 막대가 무엇을 표시하는지 **그래프 범례에 반드시 기재**

### 통계적으로 유의미를 나타내는 표기
* \*: p < 0.05
* \*\*: p < 0.01
* \*\*\*: p < 0.001
* 유의미하지 않다는 것은 **N.S. (non-significant)**로 표기.

---

## 5.4 제1종 오류와 제2종 오류

### 진실과 판단의 4패턴

가설검정 결과는 진실(귀무가설이 옳음/대립가설이 옳음)과 우리의 판단(귀무가설을 기각하지 않음/기각함)에 따라 네 가지 패턴으로 나뉩니다.

* **옳은 판단**:
    * 귀무가설이 옳을 때 귀무가설을 기각하지 않음
    * 대립가설이 옳을 때 귀무가설을 기각하고 대립가설을 채택
* **잘못된 판단**:
    * **제1종 오류 (위양성)**: 귀무가설이 옳음에도 불구하고 귀무가설을 기각하고 대립가설을 채택하는 잘못입니다. (예: 약의 효과가 없는데도 있다고 판단) 이 오류가 일어날 확률은 **알파(α)**로 나타냅니다.
    * **제2종 오류 (위음성)**: 대립가설이 옳음에도 불구하고 귀무가설을 기각하지 않는 잘못입니다. (예: 약의 효과가 있는데 없다고 판단) 이 오류가 일어나지 않을 확률, 즉 올바르게 판단할 확률을 **검정력(1-β)**이라고 하며, 일반적으로 80%로 설정합니다.

### 제1종 오류와 제2종 오류의 상충 관계

* 알파(α)와 베타(β)는 모두 0에 가깝게 만들고 싶지만, 둘은 서로 상충 관계입니다.
* 하지만 표본 크기(n)가 클수록, 정말로 차이가 있을 때 그렇다고 올바르게 판단할 확률인 **검정력(1-β)이 상승**합니다.
